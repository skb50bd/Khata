
@page
@model WebUI.Pages.Products.IndexModel

@{
    ViewData["Title"] = "Products";
}

<h1 class="display-4 text-dark">Products</h1>
<p></p>

<div class="row">
    <div class="col-md-6">
        <form asp-page="./Index" method="get">
            <div class="input-group">
                <input asp-for="@Model.CurrentFilter"
                       name="SearchString"
                       value="@Model.CurrentFilter"
                       placeholder="Search products..."
                       class="form-control"
                       aria-label="Search keyword" />
                <input asp-for="@Model.PageSize"
                       name="PageSize"
                       value="@Model.PageSize"
                       class="form-control" hidden />
                <input asp-for="@Model.PageIndex"
                       name="PageSize"
                       value="@Model.PageIndex"
                       class="form-control" hidden />
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary"
                            type="submit"
                            id="searchButton">
                        Go
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="col-md-6 text-right">
        <p>
            <a asp-page="Create" class="btn btn-primary">Create new</a>
        </p>
    </div>
</div>
@if (!(Model.Message is null))
{
    <div class="alert alert-@Model.MessageType" role="alert">
        @Model.Message
    </div>
}

<div>
    <div>
        @await Component.InvokeAsync(
            nameof(WebUI.Pages.Components.ProductsList),
            new { products = Model.Products })

        @await  Component.InvokeAsync(
            nameof(WebUI.Pages.Components.Pagination),
            new {
                pageIndex = Model.PageIndex,
                pageSize = Model.PageSize,
                totalPages = Model.TotalPages,
                currentFilter = Model.CurrentFilter
            })
    </div>
    <p class="text-center">Showing @Model.SentCount  of total @Model.ResultsCount results</p>
</div>
